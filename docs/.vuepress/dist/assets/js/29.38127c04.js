(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{462:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p",[t._v("æœ€è¿‘å¾ˆæƒ³å†™å†™MySQLç›¸å…³çš„å†…å®¹ï¼Œå°±ä»è¿™ä¸ªè¯é¢˜å‡ºå‘å§")]),t._v(" "),a("p",[t._v("æœ‰äººè¯´åˆ MySQLè¡¨è°ä¸ä¼š")]),t._v(" "),a("p",[t._v("ä¸å°±æ˜¯")]),t._v(" "),t._m(0),a("p",[t._v("å¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯¹ä¸€å¼ TBçº§åˆ«çš„å¤§è¡¨ï¼Œæ•²ä¸‹è¿™è¡Œå‘½ä»¤")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆä½ çš„ä¸»ç®¡ï¼Œå¤§ä¸»ç®¡ï¼Œéš”å£çš„å¤§ä¸»ç®¡ å°±ä¼šæ°”åŠ¿æ±¹æ±¹çš„å†²å‘ä½ ")]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("è¿™å°±å¯¼è‡´ï¼Œè¿™ä¸ªæ—¶å€™æ‰€æœ‰å…³äºMySQLçš„æ“ä½œå…¨éƒ¨å µåœ¨é˜Ÿåˆ—ä¸­")]),t._v(" "),a("p",[t._v("å¦‚æœåœ¨ç™½å¤©ï¼Œé‚£QPSæ›²çº¿è·Œé›¶å¯æ˜¯å¾ˆå¥½çœ‹çš„")]),t._v(" "),a("p",[t._v("å½“ç„¶æœ‰äº›ä¸è¾è¾›è‹¦çš„DBAä¼šé€‰æ‹©ï¼Œå¤§æ™šä¸Šçˆ¬èµ·æ¥åˆ è¡¨")]),t._v(" "),a("p",[a("font",{attrs:{color:"#DC143C"}},[t._v("å…ˆè¯´ç»“è®º: å…ˆç”¨lnå»ºç«‹ç¡¬é“¾æ¥ï¼Œå†dropè¡¨ï¼Œæœ€åç”¨truncateåˆ é™¤ç´¢å¼•æ–‡ä»¶")])],1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("é‚£ä¹ˆä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ")]),t._v(" "),a("p",[t._v("äº‹åŠ¡å°±æ˜¯ä¸€ä»¶äº‹ï¼Œä¸€å †SQLç»„")]),t._v(" "),a("p",[t._v("è¿™äº›SQLè¦ä¹ˆä¸€èµ·å®Œæˆï¼Œè¦ä¹ˆä¸€ä¸ªéƒ½ä¸åš, å®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½")]),t._v(" "),a("p",[t._v("äº‹åŠ¡æ˜¯å¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½ï¼Œä¿è¯äº†æ•°æ®çš„å®Œæ•´")]),t._v(" "),a("p",[t._v("äº‹åŠ¡æ»¡è¶³è‘—åçš„ACIDæ¡ä»¶")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),a("p",[t._v("åœ¨my.cnfä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€æ¡é…ç½®")]),t._v(" "),t._m(37),a("p",[t._v("æŸ¥çœ‹è¡¨ç©ºé—´çŠ¶æ€ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤")]),t._v(" "),t._m(38),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),a("p",[t._v("åœ¨æ•°æ®åº“bigtestä¸­ï¼Œæœ‰ä¸€ä¸ªè¡¨ï¼Œåä¸ºTABLENAMEï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤")]),t._v(" "),t._m(44),a("p",[t._v("ç°åœ¨TABLENAME.ibdæ–‡ä»¶å¤ªå¤§ï¼Œå¯¼è‡´åˆ è¡¨çš„æ—¶å€™è¿‡æ…¢")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œå°±éœ€è¦ä½¿ç”¨ç¡¬é“¾æ¥å¯¹åŒä¸€æ–‡ä»¶å†å»ºç«‹ä¸€æ¬¡ç´¢å¼•")]),t._v(" "),a("p",[t._v("è¿™ä¸ªæ—¶å€™dropæ‰TABLENAME.ibdæ–‡ä»¶ï¼Œé‚£å°±æ˜¯ç§’çº§")]),t._v(" "),a("p",[t._v("å› ä¸ºFSæŸ¥è¯¢è¯¥æ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªç´¢å¼•ï¼Œå°±ä¸ä¼šçœŸæ­£çš„åˆ é™¤è¿™å¼ è¡¨ï¼Œè€Œåªæ˜¯åˆ é™¤è¿™ä¸ªç´¢å¼•")]),t._v(" "),t._m(45),a("p",[t._v("æ­¤æ—¶dropè¡¨ï¼Œå°±ä¼šç¬é—´ç»“æŸ")]),t._v(" "),t._m(46),t._m(47),t._v(" "),a("p",[t._v("è¿™ä¸ªæ—¶å€™å·²ç»æŠŠè¡¨åˆ äº† MySQLé‡Œé¢å·²ç»æ²¡æœ‰è¿™å¼ è¡¨äº† ä½†ç£ç›˜å¹¶æ²¡æœ‰é‡Šæ”¾")]),t._v(" "),a("p",[t._v("ç£ç›˜é‡Œè¿˜æœ‰é‚£ä¸ªTABLENAME.ibd.tmpå¤§æ–‡ä»¶ï¼Œäºæ˜¯é—®é¢˜è½¬æ¢ä¸ºå¦‚ä½•åˆ é™¤ä¸€ä¸ªå¤§æ–‡ä»¶è€Œä¸å¼•èµ·å¤§IO")]),t._v(" "),a("p",[t._v("åŒæ ·è¿™ä¸ªæ—¶å€™ä¸èƒ½ç”¨rmå‘½ä»¤ï¼Œç”¨äº†çš„è¯ç£ç›˜IOå¼€é”€é£™é«˜, CPUæ‰“æ»¡ï¼Œsshéƒ½è¿ä¸ä¸Šäº†ï¼Œé‚£ä¹ˆæ­å–œä½ åˆæœ‰ğŸµå–äº†")]),t._v(" "),a("p",[t._v("é‚£ç”¨ä»€ä¹ˆå‘¢")]),t._v(" "),t._m(48),t._v(" "),a("p",[t._v("å…¶å®æœ‰ä¸¤ä¸ªtruncate, ä¸€ä¸ªæ˜¯Linuxä¸‹FSå¯¹æ–‡ä»¶æ“ä½œçš„å‘½ä»¤ï¼Œä¸€ä¸ªæ˜¯MySQLä¸­å¯¹è¡¨æ“ä½œçš„å‘½ä»¤")]),t._v(" "),t._m(49),t._v(" "),a("p",[t._v("truncate å’Œå…¶å­—é¢æ„æ€ä¸€è‡´ï¼Œæˆªæ–­")]),t._v(" "),a("p",[t._v("æŠŠæ–‡ä»¶æˆªæ–­æˆæŒ‡å®šå¤§å°(æ³¨æ„: å¯ä»¥æ˜¯æ”¾å¤§ä¹Ÿå¯ä»¥æ˜¯ç¼©å°)")]),t._v(" "),a("p",[t._v("é™„ä¸Štruncateçš„Linuxæºç ï¼Œå…¶åŸºæœ¬æ€è·¯å°±æ˜¯ä¸‰æ¬¡é‡Šæ”¾é—´æ¥å—ï¼Œæˆªå–inode")]),t._v(" "),t._m(50),t._v(" "),a("p",[t._v("truncateæ“ä½œåˆ™æ˜¯å¯¹inodeçš„æ‰€æœ‰å—è¿›è¡Œé‡Šæ”¾ï¼Œæœ€åè®¾ç½®å…¶å¤§å°ä¸º0")]),t._v(" "),t._m(51),t._m(52),t._v(" "),a("p",[t._v("ä¸€èˆ¬è¯´Sqlçš„truncateä¼šæŠŠå®ƒå’Œdropï¼Œdeleteæ”¾åœ¨ä¸€èµ·å¯¹æ¯”")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“MySQLæœ‰ä¸€ç³»åˆ—çš„æ—¥å¿—ç”¨äºä¿æŠ¤æ•°æ®")]),t._v(" "),a("p",[t._v("å°¤å…¶æ˜¯å¯¹äºå†™æ“ä½œï¼Œé™¤äº†ä¼ ç»Ÿçš„transaction logï¼Œå¦å¤–è¿˜æœ‰binlog")]),t._v(" "),a("p",[t._v("è¿™ä¸€äº›logæ—¥å¿—éƒ½æ˜¯åœ¨æ“ä½œçš„åŒæ—¶è¿›è¡Œä¹¦å†™çš„")]),t._v(" "),t._m(53),t._v(" "),a("p",[t._v("truncateæ“ä½œæ—¶ï¼ŒæŠŠæ‰€æœ‰æ•°æ®åˆ é™¤ï¼Œä»…æŠŠè¡¨ç»“æ„è®°å½•åˆ°transition logä¸­ï¼Œå¾ˆæ˜æ˜¾è¿™ç§æ“ä½œè¾ƒéš¾æ¢å¤ï¼Œä½†è€—æ—¶è¾ƒå°‘ DDL")]),t._v(" "),a("p",[t._v("dropè¡¨çš„æ—¶å€™ï¼Œå°±è·Ÿç›´æ¥ï¼ŒæŠŠè¡¨æ•°æ®å’Œè¡¨ç»“æ„éƒ½åˆ é™¤äº† DDL")]),t._v(" "),a("p",[t._v("dropå’Œtruncateæƒ³è¦æ¢å¤ä¹Ÿæ˜¯å¯ä»¥çš„ä½†ä¸æ˜¯é€šè¿‡rollbackï¼Œè€Œæ˜¯é€šè¿‡è§£æbinlogæ–‡ä»¶")]),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),a("p",[t._v("æŠŠç©ºå­—ç¬¦é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œä½†IOé«˜ï¼Œioä¼šè·Œé›¶")]),t._v(" "),t._m(56),t._m(57),t._v(" "),a("p",[t._v("æŠŠtrueå€¼é‡å®šå‘åˆ°æ–‡ä»¶ä¸­")]),t._v(" "),t._m(58),t._m(59),t._v(" "),t._m(60),t._m(61),t._v(" "),t._m(62),t._m(63),t._v(" "),a("p",[t._v("Truncateæ–‡ä»¶æˆªæ–­åœ¨HDFSä¸Šçš„è¡¨ç°å…¶å®æ˜¯blockçš„æˆªæ–­ã€‚ä¼ å…¥ç›®æ ‡æ–‡ä»¶ï¼Œä¸ç›®æ ‡ä¿ç•™çš„é•¿åº¦(æ­¤é•¿åº¦åº”å°äºæ–‡ä»¶åŸå¤§å°)")]),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),t._m(66),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://draveness.me/mysql-transaction",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€æµ…å…¥æ·±å‡ºã€MySQL ä¸­äº‹åŠ¡çš„å®ç°"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.runoob.com/mysql/mysql-transaction.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL äº‹åŠ¡"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://dbarobin.com/2015/01/15/solution-of-droping-large-table-under-mysql/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL Drop å¤§è¡¨è§£å†³æ–¹æ¡ˆ"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://xiaorui.cc/2016/12/08/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E5%BB%BA%E8%AE%AEinnodb%E4%BD%BF%E7%94%A8%E4%BA%BF%E7%BA%A7%E5%A4%A7%E8%A1%A8/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸ºä»€ä¹ˆä¸å»ºè®®innodbä½¿ç”¨äº¿çº§å¤§è¡¨"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.zybuluo.com/phper/note/78781",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQLå­˜å‚¨å¼•æ“ä¸­çš„MyISAMå’ŒInnoDB"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"http://www.voidcn.com/article/p-xuukgblc-gu.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("SQLä¸­åˆ é™¤æ•´å¼ è¡¨ä¿¡æ¯TRUNCATE å’ŒDELETEæ€§èƒ½æ¯”è¾ƒ"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://serverfault.com/questions/480526/deleting-very-large-file-without-webserver-freezing",target:"_blank",rel:"noopener noreferrer"}},[t._v("Deleting very large file without webserver freezing"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://serverfault.com/questions/366324/linux-server-out-of-space/366327#366327",target:"_blank",rel:"noopener noreferrer"}},[t._v("Linux server out of space"),a("OutboundLink")],1)])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("drop")]),this._v(" "),s("span",{attrs:{class:"token keyword"}},[this._v("table")]),this._v(" TABLENAME\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å…¶åŸå› æ˜¯å› ä¸ºå½“å¼€å§‹Dropè¡¨çš„æ—¶å€™ï¼Œå› ä¸º"),s("code",[this._v("Innodb")]),this._v("æ”¯æŒäº‹åŠ¡ï¼Œä¸ºä¿æŒä¸€è‡´æ€§ï¼Œä¼šç»´æŠ¤ä¸€ä¸ªå…¨å±€é”")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"innodb-myisam"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#innodb-myisam","aria-hidden":"true"}},[this._v("#")]),this._v(" "),s("code",[this._v("Innodb")]),this._v(" - "),s("code",[this._v("MyISAM")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ç›®å‰ä¸€èˆ¬MySQLå¼•æ“ä½¿ç”¨çš„æ˜¯"),s("code",[this._v("Innodb")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å…¶æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ”¯æŒäº‹åŠ¡ï¼Œè™½ç„¶"),s("code",[this._v("Select")]),this._v("æ€§èƒ½æ¯”"),s("code",[this._v("MyISAM")]),this._v("å¼±ä¸€ç‚¹")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"äº‹åŠ¡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#äº‹åŠ¡","aria-hidden":"true"}},[this._v("#")]),this._v(" äº‹åŠ¡")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("code",[this._v("åŸå­æ€§")]),this._v(": åœ¨å­¦ä¹ äº‹åŠ¡æ—¶ï¼Œç»å¸¸æœ‰äººä¼šå‘Šè¯‰ä½ ï¼Œäº‹åŠ¡å°±æ˜¯ä¸€ç³»åˆ—çš„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨éƒ½æ‰§è¡Œï¼Œè¦éƒ½ä¸æ‰§è¡Œï¼Œè¿™å…¶å®å°±æ˜¯å¯¹äº‹åŠ¡åŸå­æ€§çš„åˆ»ç”»ï¼›è™½ç„¶äº‹åŠ¡å…·æœ‰åŸå­æ€§ï¼Œä½†æ˜¯åŸå­æ€§å¹¶ä¸æ˜¯åªä¸äº‹åŠ¡æœ‰å…³ç³»ï¼Œå®ƒçš„èº«å½±åœ¨å¾ˆå¤šåœ°æ–¹éƒ½ä¼šå‡ºç°")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("ul",[s("li",[this._v("å¦‚æœæ“ä½œå¹¶ä¸å…·æœ‰åŸå­æ€§ï¼Œå¹¶ä¸”å¯ä»¥å†åˆ†ä¸ºå¤šä¸ªæ“ä½œï¼Œå½“è¿™äº›æ“ä½œå‡ºç°é”™è¯¯æˆ–æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œæ•´ä¸ªæ“ä½œå°±å¯èƒ½ä¸ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè€Œå·²ç»è¿›è¡Œçš„æ“ä½œé€ æˆçš„å‰¯ä½œç”¨å°±å¯èƒ½é€ æˆæ•°æ®æ›´æ–°çš„ä¸¢å¤±æˆ–è€…é”™è¯¯")]),this._v(" "),s("li",[this._v("å…¶éš¾ç‚¹åœ¨äºå¹¶è¡Œäº‹åŠ¡çš„åŸå­æ€§å¤„ç†")]),this._v(" "),s("li",[this._v("MySQL ä½¿ç”¨"),s("code",[this._v("å›æ»šæ—¥å¿—undo log")]),this._v("å®ç°äº‹åŠ¡çš„åŸå­æ€§")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[s("code",[this._v("ä¸€è‡´æ€§")]),this._v(": åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´å")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("ul",[s("li",[this._v("å…¶å®é™¤äº†ACIDçš„ä¸€è‡´æ€§ï¼ŒCAPåŸåˆ™ä¸­ä¹Ÿæœ‰ä¸€ä¸ªä¸€è‡´æ€§")]),this._v(" "),s("li",[this._v("CAPä¸­çš„ä¸€è‡´æ€§æŒ‡çš„æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å„ä¸ªèŠ‚ç‚¹ä¸­å¯¹äºåŒä¸€æ•°æ®çš„æ‹·è´æœ‰ç€ç›¸åŒçš„å€¼")]),this._v(" "),s("li",[this._v("ACIDä¸­ä¸€è‡´æ€§æŒ‡çš„æ˜¯æ•°æ®åº“çš„è§„åˆ™ï¼Œå¦‚æœ schema ä¸­è§„å®šäº†ä¸€ä¸ªå€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆä¸€è‡´çš„ç³»ç»Ÿå¿…é¡»ç¡®ä¿åœ¨æ‰€æœ‰çš„æ“ä½œä¸­ï¼Œè¯¥å€¼éƒ½æ˜¯å”¯ä¸€çš„")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[s("code",[this._v("éš”ç¦»æ€§")]),this._v(": æ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("ul",[a("li",[a("code",[t._v("RAED UNCOMMITED")]),t._v(": ä½¿ç”¨æŸ¥è¯¢è¯­å¥ä¸ä¼šåŠ é”ï¼Œå¯èƒ½ä¼šè¯»åˆ°æœªæäº¤çš„è¡Œ"),a("code",[t._v("Dirty Read")])]),t._v(" "),a("li",[a("code",[t._v("READ COMMITED")]),t._v(": åªå¯¹è®°å½•åŠ è®°å½•é”ï¼Œè€Œä¸ä¼šåœ¨è®°å½•ä¹‹é—´åŠ é—´éš™é”ï¼Œæ‰€ä»¥å…è®¸æ–°çš„è®°å½•æ’å…¥åˆ°è¢«é”å®šè®°å½•çš„é™„è¿‘ï¼Œæ‰€ä»¥å†å¤šæ¬¡ä½¿ç”¨æŸ¥è¯¢è¯­å¥æ—¶ï¼Œå¯èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœ"),a("code",[t._v("Non-Repeatable Read")])]),t._v(" "),a("li",[a("code",[t._v("REPEATABLE READ")]),t._v(": å¤šæ¬¡è¯»å–åŒä¸€èŒƒå›´çš„æ•°æ®ä¼šè¿”å›ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„å¿«ç…§ï¼Œä¸ä¼šè¿”å›ä¸åŒçš„æ•°æ®è¡Œï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿå¹»è¯»"),a("code",[t._v("Phantom Read")])]),t._v(" "),a("li",[a("code",[t._v("SERIALIZABLE")]),t._v(": InnoDB éšå¼åœ°å°†å…¨éƒ¨çš„æŸ¥è¯¢è¯­å¥åŠ ä¸Šå…±äº«é”ï¼Œè§£å†³äº†å¹»è¯»çš„é—®é¢˜")]),t._v(" "),a("li",[t._v("Mysqlçš„éš”ç¦»æ€§é€šè¿‡å…±äº«é”Sharedã€äº’æ–¥é”Exclusiveã€æ—¶é—´æˆ³ã€versionç­‰æ‰‹æ®µå®ç°")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[s("code",[this._v("æŒä¹…æ€§")]),this._v(": æ—¢ç„¶æ˜¯æ•°æ®åº“ï¼Œé‚£ä¹ˆä¸€å®šå¯¹æ•°æ®çš„æŒä¹…å­˜å‚¨æœ‰ç€éå¸¸å¼ºçƒˆçš„éœ€æ±‚ï¼Œå¦‚æœæ•°æ®è¢«å†™å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œé‚£ä¹ˆæ•°æ®ä¸€å®šèƒ½å¤Ÿè¢«å®‰å…¨å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼›è€Œäº‹åŠ¡çš„æŒä¹…æ€§å°±ä½“ç°åœ¨ï¼Œä¸€æ—¦äº‹åŠ¡è¢«æäº¤ï¼Œé‚£ä¹ˆæ•°æ®ä¸€å®šä¼šè¢«å†™å…¥åˆ°æ•°æ®åº“ä¸­å¹¶æŒä¹…å­˜å‚¨èµ·æ¥")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("ul",[s("li",[this._v("MySQL ä½¿ç”¨"),s("code",[this._v("é‡åšæ—¥å¿—redo log")]),this._v("å®ç°äº‹åŠ¡çš„æŒä¹…æ€§")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å…¶ä»–åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–åŒºåˆ«","aria-hidden":"true"}},[this._v("#")]),this._v(" å…¶ä»–åŒºåˆ«")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("å‚¨å­˜ç»“æ„")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("MyISAM")]),t._v("ï¼šæ¯ä¸ª"),a("code",[t._v("MyISAM")]),t._v("åœ¨ç£ç›˜ä¸Šå­˜å‚¨æˆä¸‰ä¸ªæ–‡ä»¶ã€‚ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„åå­—ä»¥è¡¨çš„åå­—å¼€å§‹ï¼Œæ‰©å±•åæŒ‡å‡ºæ–‡ä»¶ç±»å‹ã€‚.frmæ–‡ä»¶å­˜å‚¨è¡¨å®šä¹‰ã€‚æ•°æ®æ–‡ä»¶çš„æ‰©å±•åä¸º.MYD (MYData)ã€‚ç´¢å¼•æ–‡ä»¶çš„æ‰©å±•åæ˜¯.MYI (MYIndex)ã€‚"),a("br"),t._v(" "),a("code",[t._v("InnoDB")]),t._v("ï¼šæ‰€æœ‰çš„è¡¨éƒ½ä¿å­˜åœ¨åŒä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­ï¼ˆä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯ç‹¬ç«‹çš„è¡¨ç©ºé—´æ–‡ä»¶), "),a("code",[t._v("InnoDB")]),t._v("è¡¨çš„å¤§å°åªå—é™äºæ“ä½œç³»ç»Ÿæ–‡ä»¶çš„å¤§å°ï¼Œä¸€èˆ¬ä¸º2GB")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("å­˜å‚¨ç©ºé—´")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šå¯è¢«å‹ç¼©ï¼Œå­˜å‚¨ç©ºé—´è¾ƒå°ã€‚æ”¯æŒä¸‰ç§ä¸åŒçš„å­˜å‚¨æ ¼å¼ï¼šé™æ€è¡¨ã€åŠ¨æ€è¡¨ã€å‹ç¼©è¡¨"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼šéœ€è¦æ›´å¤šçš„å†…å­˜å’Œå­˜å‚¨ï¼Œå®ƒä¼šåœ¨ä¸»å†…å­˜ä¸­å»ºç«‹å…¶ä¸“ç”¨çš„ç¼“å†²æ± ç”¨äºé«˜é€Ÿç¼“å†²æ•°æ®å’Œç´¢å¼•")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("å¯ç§»æ¤æ€§ã€å¤‡ä»½åŠæ¢å¤")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šæ•°æ®æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ï¼Œæ‰€ä»¥åœ¨è·¨å¹³å°çš„æ•°æ®è½¬ç§»ä¸­ä¼šå¾ˆæ–¹ä¾¿ã€‚åœ¨å¤‡ä»½å’Œæ¢å¤æ—¶å¯å•ç‹¬é’ˆå¯¹æŸä¸ªè¡¨è¿›è¡Œæ“ä½œ"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼šå…è´¹çš„æ–¹æ¡ˆå¯ä»¥æ˜¯æ‹·è´æ•°æ®æ–‡ä»¶ã€å¤‡ä»½"),s("code",[this._v("binlog")]),this._v("ï¼Œæˆ–è€…ç”¨ mysqldumpï¼Œåœ¨æ•°æ®é‡è¾¾åˆ°å‡ åGçš„æ—¶å€™å°±ç›¸å¯¹ç—›è‹¦äº†")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("AUTO_INCREMENT")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šå¯ä»¥å’Œå…¶ä»–å­—æ®µä¸€èµ·å»ºç«‹è”åˆç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œè‡ªåŠ¨å¢é•¿å¯ä»¥ä¸æ˜¯ç¬¬ä¸€åˆ—ï¼Œä»–å¯ä»¥æ ¹æ®å‰é¢å‡ åˆ—è¿›è¡Œæ’åºåé€’å¢"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼š"),s("code",[this._v("InnoDB")]),this._v("ä¸­å¿…é¡»åŒ…å«åªæœ‰è¯¥å­—æ®µçš„ç´¢å¼•ã€‚å¼•æ“çš„è‡ªåŠ¨å¢é•¿åˆ—å¿…é¡»æ˜¯ç´¢å¼•ï¼Œå¦‚æœæ˜¯ç»„åˆç´¢å¼•ä¹Ÿå¿…é¡»æ˜¯ç»„åˆç´¢å¼•çš„ç¬¬ä¸€åˆ—")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("è¡¨é”å·®å¼‚")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("MyISAM")]),t._v("ï¼šåªæ”¯æŒè¡¨çº§é”ï¼Œç”¨æˆ·åœ¨æ“ä½œ"),a("code",[t._v("myisam")]),t._v("è¡¨æ—¶ï¼Œselectï¼Œupdateï¼Œdeleteï¼Œinsertè¯­å¥éƒ½ä¼šç»™è¡¨è‡ªåŠ¨åŠ é”ï¼Œå¦‚æœåŠ é”ä»¥åçš„è¡¨æ»¡è¶³insertå¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨è¡¨çš„å°¾éƒ¨æ’å…¥æ–°çš„æ•°æ®"),a("br"),t._v(" "),a("code",[t._v("InnoDB")]),t._v("ï¼šæ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼Œæ˜¯"),a("code",[t._v("innodb")]),t._v("çš„"),a("code",[t._v("æœ€å¤§ç‰¹è‰²")]),t._v("ã€‚è¡Œé”å¤§å¹…åº¦æé«˜äº†å¤šç”¨æˆ·å¹¶å‘æ“ä½œçš„æ–°èƒ½ã€‚ä½†æ˜¯"),a("code",[t._v("InnoDB")]),t._v("çš„è¡Œé”ï¼Œåªæ˜¯åœ¨WHEREçš„ä¸»é”®æ˜¯æœ‰æ•ˆçš„ï¼Œéä¸»é”®çš„WHEREéƒ½ä¼šé”å…¨è¡¨çš„")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("å…¨æ–‡ç´¢å¼•")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šæ”¯æŒ FULLTEXTç±»å‹çš„å…¨æ–‡ç´¢å¼•"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼šä¸æ”¯æŒFULLTEXTç±»å‹çš„å…¨æ–‡ç´¢å¼•ï¼Œä½†æ˜¯"),s("code",[this._v("innodb")]),this._v("å¯ä»¥ä½¿ç”¨sphinxæ’ä»¶æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œå¹¶ä¸”æ•ˆæœæ›´å¥½")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"7"}},[s("li",[this._v("è¡¨ä¸»é”®")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šå…è®¸æ²¡æœ‰ä»»ä½•ç´¢å¼•å’Œä¸»é”®çš„è¡¨å­˜åœ¨ï¼Œç´¢å¼•éƒ½æ˜¯ä¿å­˜è¡Œçš„åœ°å€"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼šå¦‚æœæ²¡æœ‰è®¾å®šä¸»é”®æˆ–è€…éç©ºå”¯ä¸€ç´¢å¼•ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª6å­—èŠ‚çš„ä¸»é”®(ç”¨æˆ·ä¸å¯è§)ï¼Œæ•°æ®æ˜¯ä¸»ç´¢å¼•çš„ä¸€éƒ¨åˆ†ï¼Œé™„åŠ ç´¢å¼•ä¿å­˜çš„æ˜¯ä¸»ç´¢å¼•çš„å€¼")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"8"}},[s("li",[this._v("è¡¨çš„å…·ä½“è¡Œæ•°")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("MyISAM")]),t._v("ï¼šä¿å­˜æœ‰è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœ"),a("code",[t._v("select count(*) from table;")]),t._v("ä¼šç›´æ¥å–å‡ºå‡ºè¯¥å€¼"),a("br"),t._v(" "),a("code",[t._v("InnoDB")]),t._v("ï¼šæ²¡æœ‰ä¿å­˜è¡¨çš„æ€»è¡Œæ•°ï¼Œå¦‚æœä½¿ç”¨"),a("code",[t._v("select count(*) from table;")]),t._v("å°±ä¼šéå†æ•´ä¸ªè¡¨ï¼Œæ¶ˆè€—ç›¸å½“å¤§ï¼Œä½†æ˜¯åœ¨åŠ äº†wehreæ¡ä»¶åï¼Œ"),a("code",[t._v("myisam")]),t._v("å’Œ"),a("code",[t._v("innodb")]),t._v("å¤„ç†çš„æ–¹å¼éƒ½ä¸€æ ·")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("CURDæ“ä½œ")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("MyISAM")]),t._v("ï¼šå¦‚æœæ‰§è¡Œå¤§é‡çš„SELECTï¼Œ"),a("code",[t._v("MyISAM")]),t._v("æ˜¯æ›´å¥½çš„é€‰æ‹©"),a("br"),t._v(" "),a("code",[t._v("InnoDB")]),t._v("ï¼šå¦‚æœä½ çš„æ•°æ®æ‰§è¡Œå¤§é‡çš„INSERTæˆ–UPDATEï¼Œå‡ºäºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼Œåº”è¯¥ä½¿ç”¨"),a("code",[t._v("InnoDB")]),t._v("è¡¨ã€‚DELETE ä»æ€§èƒ½ä¸Š"),a("code",[t._v("InnoDB")]),t._v("æ›´ä¼˜ï¼Œä½†DELETE FROM tableæ—¶ï¼Œ"),a("code",[t._v("InnoDB")]),t._v("ä¸ä¼šé‡æ–°å»ºç«‹è¡¨ï¼Œè€Œæ˜¯ä¸€è¡Œä¸€è¡Œçš„åˆ é™¤ï¼Œåœ¨"),a("code",[t._v("innodb")]),t._v("ä¸Šå¦‚æœè¦æ¸…ç©ºä¿å­˜æœ‰å¤§é‡æ•°æ®çš„è¡¨ï¼Œæœ€å¥½ä½¿ç”¨truncate tableè¿™ä¸ªå‘½ä»¤")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"10"}},[s("li",[this._v("å¤–é”®")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[s("code",[this._v("MyISAM")]),this._v("ï¼šä¸æ”¯æŒ"),s("br"),this._v(" "),s("code",[this._v("InnoDB")]),this._v("ï¼šæ”¯æŒ")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"å¼€å¯ç‹¬ç«‹è¡¨ç©ºé—´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å¯ç‹¬ç«‹è¡¨ç©ºé—´","aria-hidden":"true"}},[this._v("#")]),this._v(" å¼€å¯ç‹¬ç«‹è¡¨ç©ºé—´")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("MySQL5.6.7ä¹‹åä¼šé»˜è®¤å¼€å¯"),s("code",[this._v("ç‹¬ç«‹è¡¨ç©ºé—´")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-vim extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vim"}},[s("code",[this._v("innodb_file_per_table "),s("span",{attrs:{class:"token operator"}},[this._v("=")]),this._v(" "),s("span",{attrs:{class:"token number"}},[this._v("1")]),this._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("show")]),t._v(" variables "),a("span",{attrs:{class:"token operator"}},[t._v("like")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'%per_table'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token comment"}},[t._v("-----------------------+-------+")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" Variable_name         "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("Value")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token comment"}},[t._v("-----------------------+-------+")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" innodb_file_per_table "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("ON")]),t._v("    "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token comment"}},[t._v("-----------------------+-------+")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[t._v("å¦‚æœ"),a("code",[t._v("innodb_file_per_table")]),t._v("çš„valueå€¼ä¸º"),a("code",[t._v("OFF")]),t._v("ï¼Œä»£è¡¨é‡‡ç”¨çš„æ˜¯å…±äº«è¡¨ç©ºé—´ã€‚"),a("br"),t._v("\nå¦‚æœ"),a("code",[t._v("innodb_file_per_table")]),t._v("çš„valueå€¼ä¸º"),a("code",[t._v("ON")]),t._v("ï¼Œä»£è¡¨é‡‡ç”¨çš„æ˜¯ç‹¬ç«‹è¡¨ç©ºé—´")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å…±äº«è¡¨-ç‹¬ç«‹è¡¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…±äº«è¡¨-ç‹¬ç«‹è¡¨","aria-hidden":"true"}},[this._v("#")]),this._v(" å…±äº«è¡¨ - ç‹¬ç«‹è¡¨")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("å…±äº«è¡¨ç©ºé—´ï¼šæŸä¸€ä¸ªæ•°æ®åº“çš„æ‰€æœ‰çš„è¡¨æ•°æ®ï¼Œç´¢å¼•æ–‡ä»¶å…¨éƒ¨æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé»˜è®¤è¿™ä¸ªå…±äº«è¡¨ç©ºé—´çš„æ–‡ä»¶è·¯å¾„åœ¨dataç›®å½•ä¸‹")]),t._v(" "),a("ul",[a("li",[t._v("é»˜è®¤çš„æ–‡ä»¶åä¸º:ibdata1(æ­¤æ–‡ä»¶ï¼Œå¯ä»¥æ‰©å±•æˆå¤šä¸ª)ã€‚æ³¨æ„ï¼Œåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œè¿ç»´è¶…çº§ä¸æ–¹ä¾¿ã€‚ä½ çœ‹ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¦å¯¹å•è¡¨ç»´æŠ¤ï¼Œååˆ†ä¸æ–¹ä¾¿ã€‚å¦å¤–ï¼Œä½ åœ¨åšdeleteæ“ä½œçš„æ—¶å€™ï¼Œæ–‡ä»¶å†…ä¼šç•™ä¸‹å¾ˆå¤šé—´éš™ï¼Œibdata1æ–‡ä»¶ä¸ä¼šè‡ªåŠ¨æ”¶ç¼©ã€‚æ¢å¥è¯è¯´ï¼Œä½¿ç”¨å…±äº«è¡¨ç©ºé—´æ¥å­˜å‚¨æ•°æ®ï¼Œä¼šé­é‡drop tableä¹‹åï¼Œç©ºé—´æ— æ³•é‡Šæ”¾çš„é—®é¢˜ã€‚")])])]),t._v(" "),a("li",[a("p",[t._v("ç‹¬ç«‹è¡¨ç©ºé—´:æ¯ä¸€ä¸ªè¡¨éƒ½ä»¥ç‹¬ç«‹æ–¹å¼æ¥éƒ¨ç½²ï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ª.frmè¡¨æè¿°æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ª.ibdæ–‡ä»¶ã€‚")]),t._v(" "),a("ul",[a("li",[t._v(".frmæ–‡ä»¶ï¼šä¿å­˜äº†æ¯ä¸ªè¡¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„çš„å®šä¹‰ç­‰ï¼Œè¯¥æ–‡ä»¶ä¸æ•°æ®åº“å¼•æ“æ— å…³ã€‚")]),t._v(" "),a("li",[t._v(".ibdæ–‡ä»¶ï¼šä¿å­˜äº†æ¯ä¸ªè¡¨çš„æ•°æ®å’Œç´¢å¼•çš„æ–‡ä»¶ã€‚")]),t._v(" "),a("li",[t._v("æ³¨æ„ï¼Œåœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰è‡ªå·²ç‹¬ç«‹çš„è¡¨ç©ºé—´ï¼Œè¿™æ ·è¿ç»´èµ·æ¥æ–¹ä¾¿ï¼Œå¯ä»¥å®ç°å•è¡¨åœ¨ä¸åŒæ•°æ®åº“ä¹‹é—´çš„ç§»åŠ¨ã€‚å¦å¤–ï¼Œåœ¨æ‰§è¡Œdrop tableæ“ä½œçš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥è‡ªåŠ¨å›æ”¶è¡¨ç©ºé—´ã€‚åœ¨æ‰§è¡Œdeleteæ“ä½œåï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œalter table TableName engine=innodbè¯­å¥æ¥æ•´ç†ç¢ç‰‡ï¼Œå›æ”¶éƒ¨åˆ†è¡¨ç©ºé—´")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"ç¡¬é“¾æ¥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç¡¬é“¾æ¥","aria-hidden":"true"}},[this._v("#")]),this._v(" ç¡¬é“¾æ¥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("å‡è®¾ï¼Œ"),s("code",[this._v("datadir = /data/mysql/")]),this._v(", å¦å¤–ï¼Œæœ‰ä¸€ä¸ªdatabase,åä¸ºbigtest")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" system ls "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("l "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token keyword"}},[t._v("data")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bigtest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("\n\n"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("rw"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("r"),a("span",{attrs:{class:"token comment"}},[t._v("----- 1 mysql mysql          9023  8 18 11:32 TABLENAME.frm")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("rw"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("r"),a("span",{attrs:{class:"token comment"}},[t._v("----- 1 mysql mysql 2356792000512  8 18 11:32 TABLENAME.ibd")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" system ln "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token keyword"}},[t._v("data")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bigtest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("TABLENAME"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ibd "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token keyword"}},[t._v("data")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bigtest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("TABLENAME"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ibd"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tmp\n\n"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("rw"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("r"),a("span",{attrs:{class:"token comment"}},[t._v("----- 1 mysql mysql          9023  8 18 11:32 TABLENAME.frm")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("rw"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("r"),a("span",{attrs:{class:"token comment"}},[t._v("----- 2 mysql mysql 2356792000512  8 18 11:32 TABLENAME.ibd")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("rw"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("r"),a("span",{attrs:{class:"token comment"}},[t._v("----- 2 mysql mysql 2356792000512  8 18 11:32 TABLENAME.ibd.tmp")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("drop")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("table")]),t._v(" erp"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nQuery OK"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("rows")]),t._v(" affected "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("1.03")]),t._v(" sec"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"truncate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#truncate","aria-hidden":"true"}},[this._v("#")]),this._v(" truncate")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("ç­”æ¡ˆæ˜¯"),s("code",[this._v("truncate")]),this._v("ï¼ˆå…¶å®è¿˜æœ‰å…¶ä»–ä¸€äº›æ–¹æ³•, ä½†å¯¹IOå½±å“éƒ½æ¯”è¾ƒå¤§ï¼‰")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"fsçš„truncate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fsçš„truncate","aria-hidden":"true"}},[this._v("#")]),this._v(" FSçš„truncate")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("ç›´æ¥å—ï¼Œå°±æ˜¯i_zoneä¸­ç›¸åº”ä¿å­˜çš„å°±ç›´æ¥æ˜¯inodeæ‰€ä½¿ç”¨çš„ç£ç›˜å—")]),t._v(" "),a("li",[t._v("ä¸€çº§é—´æ¥å—ï¼Œé¡¾åæ€ä¹‰ï¼Œi_zoneæŒ‡æ˜çš„å—ä¸­å­˜æ”¾çš„ä¸æ˜¯æ™®é€šæ•°æ®ï¼Œè€Œæ˜¯å—å·\n"),a("ul",[a("li",[t._v("å› æ­¤å¯¹ä¸€çº§é—´æ¥å—çš„é‡Šæ”¾æ“ä½œå°±æ˜¯è¯»å–ä¸€çº§é—´æ¥å—ï¼Œéå†å…¶ä¸­æ¯ä¸€ä¸ªå—è°ƒç”¨free_blockè¿›è¡Œé‡Šæ”¾")])])]),t._v(" "),a("li",[t._v("äºŒçº§é—´æ¥å—å°±æ˜¯i_zoneä¸­å­˜å‚¨çš„æ˜¯ä¸€çº§é—´æ¥å—çš„å—å·\n"),a("ul",[a("li",[t._v("å¯¹äºäºŒçº§é—´æ¥å—è¯»å–ä¸€çº§é—´æ¥å—åå°±å¯ä»¥è½¬æ¢ä¸ºå¯¹ä¸€çº§é—´æ¥å—çš„é‡Šæ”¾æ“ä½œ")])])]),t._v(" "),a("li",[t._v("åŒç†ï¼Œä¸‰çº§é—´æ¥å—i_zoneå­˜å‚¨çš„å°±æ˜¯äºŒçº§é—´æ¥å—çš„å—å·ï¼Œæ‰€ä»¥é‡Šæ”¾ä¸‰çº§é—´æ¥å—å°±éœ€è¦ä¸‰æ¬¡é€’å½’")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-cpp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("/*\n * linux/fs/truncate.c\n *\n * (C) 1991 Linus Torvalds\n */")]),t._v("\n\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<linux/sched.h>")]),t._v("  ")]),a("span",{attrs:{class:"token comment"}},[t._v("// è°ƒåº¦ç¨‹åºå¤´æ–‡ä»¶ï¼Œå®šä¹‰äº†ä»»åŠ¡ç»“æ„task_structã€åˆå§‹ä»»åŠ¡0 çš„æ•°æ®ï¼Œ")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// è¿˜æœ‰ä¸€äº›æœ‰å…³æè¿°ç¬¦å‚æ•°è®¾ç½®å’Œè·å–çš„åµŒå…¥å¼æ±‡ç¼–å‡½æ•°å®è¯­å¥ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token macro property"}},[t._v("#"),a("span",{attrs:{class:"token directive keyword"}},[t._v("include")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("<sys/stat.h>")]),t._v("  ")]),a("span",{attrs:{class:"token comment"}},[t._v("// æ–‡ä»¶çŠ¶æ€å¤´æ–‡ä»¶ã€‚å«æœ‰æ–‡ä»¶æˆ–æ–‡ä»¶ç³»ç»ŸçŠ¶æ€ç»“æ„stat{}å’Œå¸¸é‡ã€‚")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾ä¸€æ¬¡é—´æ¥å—ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("free_ind")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" buffer_head "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("bh"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("short")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// å¦‚æœé€»è¾‘å—å·ä¸º0ï¼Œåˆ™è¿”å›ã€‚")]),t._v("\n\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// è¯»å–ä¸€æ¬¡é—´æ¥å—ï¼Œå¹¶é‡Šæ”¾å…¶ä¸Šè¡¨æ˜ä½¿ç”¨çš„æ‰€æœ‰é€»è¾‘å—ï¼Œç„¶åé‡Šæ”¾è¯¥ä¸€æ¬¡é—´æ¥å—çš„ç¼“å†²åŒºã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bh "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("bread")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    p "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("short")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("bh"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("b_data"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// æŒ‡å‘æ•°æ®ç¼“å†²åŒºã€‚")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("512")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// æ¯ä¸ªé€»è¾‘å—ä¸Šå¯æœ‰512 ä¸ªå—å·ã€‚")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("free_block")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾æŒ‡å®šçš„é€»è¾‘å—ã€‚")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("brelse")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bh"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                     "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾ç¼“å†²åŒºã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("free_block")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾è®¾å¤‡ä¸Šçš„ä¸€æ¬¡é—´æ¥å—ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾äºŒæ¬¡é—´æ¥å—ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("free_dind")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" buffer_head "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("bh"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("short")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),t._v("block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// å¦‚æœé€»è¾‘å—å·ä¸º0ï¼Œåˆ™è¿”å›ã€‚")]),t._v("\n\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// è¯»å–äºŒæ¬¡é—´æ¥å—çš„ä¸€çº§å—ï¼Œå¹¶é‡Šæ”¾å…¶ä¸Šè¡¨æ˜ä½¿ç”¨çš„æ‰€æœ‰é€»è¾‘å—ï¼Œç„¶åé‡Šæ”¾è¯¥ä¸€çº§å—çš„ç¼“å†²åŒºã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bh "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("bread")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    p "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("unsigned")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("short")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("bh"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("b_data"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// æŒ‡å‘æ•°æ®ç¼“å†²åŒºã€‚")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("512")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// æ¯ä¸ªé€»è¾‘å—ä¸Šå¯è¿æ¥512 ä¸ªäºŒçº§å—ã€‚")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("free_ind")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾æ‰€æœ‰ä¸€æ¬¡é—´æ¥å—ã€‚")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("brelse")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bh"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                   "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾ç¼“å†²åŒºã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token function"}},[t._v("free_block")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" block"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// æœ€åé‡Šæ”¾è®¾å¤‡ä¸Šçš„äºŒæ¬¡é—´æ¥å—ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// å°†èŠ‚ç‚¹å¯¹åº”çš„æ–‡ä»¶é•¿åº¦æˆªä¸º0ï¼Œå¹¶é‡Šæ”¾å ç”¨çš„è®¾å¤‡ç©ºé—´ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("truncate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" m_inode "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("inode"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// å¦‚æœä¸æ˜¯å¸¸è§„æ–‡ä»¶æˆ–è€…æ˜¯ç›®å½•æ–‡ä»¶ï¼Œåˆ™è¿”å›ã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S_ISREG "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_mode"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" S_ISDIR "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_mode"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾i èŠ‚ç‚¹çš„7 ä¸ªç›´æ¥é€»è¾‘å—ï¼Œå¹¶å°†è¿™7 ä¸ªé€»è¾‘å—é¡¹å…¨ç½®é›¶ã€‚")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// å¦‚æœå—å·ä¸ä¸º0ï¼Œåˆ™é‡Šæ”¾ä¹‹ã€‚")]),t._v("\n      free_block "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  free_ind "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾ä¸€æ¬¡é—´æ¥å—ã€‚")]),t._v("\n  free_dind "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_dev"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("8")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡Šæ”¾äºŒæ¬¡é—´æ¥å—ã€‚")]),t._v("\n  inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("7")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_zone"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("8")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),a("span",{attrs:{class:"token comment"}},[t._v("// é€»è¾‘å—é¡¹7ã€8 ç½®é›¶ã€‚")]),t._v("\n  inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_size "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),a("span",{attrs:{class:"token comment"}},[t._v("// æ–‡ä»¶å¤§å°ç½®é›¶ã€‚")]),t._v("\n  inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_dirt "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),a("span",{attrs:{class:"token comment"}},[t._v("// ç½®èŠ‚ç‚¹å·²ä¿®æ”¹æ ‡å¿—ã€‚")]),t._v("\n  inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_mtime "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" inode"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("i_ctime "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" CURRENT_TIME"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// é‡ç½®æ–‡ä»¶å’ŒèŠ‚ç‚¹ä¿®æ”¹æ—¶é—´ä¸ºå½“å‰æ—¶é—´ã€‚")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"sqlçš„truncate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sqlçš„truncate","aria-hidden":"true"}},[this._v("#")]),this._v(" SQLçš„truncate")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("deleteæ“ä½œæ—¶ï¼Œä¼šæŠŠæ¯æ¡æ•°æ®æ ‡è®°ä¸º"),s("code",[this._v("å·²åˆ é™¤")]),this._v("ï¼Œä¸å¯é¿å…çš„å¯¼è‡´äº†æ“ä½œååˆ†è€—æ—¶ï¼Œä¸”å®é™…ä¸Šç©ºé—´å¹¶æ²¡æœ‰è¢«é‡Šæ”¾ DML")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"å…¶ä»–æ–¹æ³•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–æ–¹æ³•","aria-hidden":"true"}},[this._v("#")]),this._v(" å…¶ä»–æ–¹æ³•")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("code",[this._v("é‡å®šå‘")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("data"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bigtest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("TABLENAME"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("ibd"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("tmp\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[s("code",[this._v(":")]),this._v("/"),s("code",[this._v("true")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("data"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("bigtest"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("TABLENAME"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("ibd"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("tmp\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[s("code",[this._v("/dev/null")]),this._v("/"),s("code",[this._v("dd")]),this._v("/"),s("code",[this._v("cp")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("cat")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("dev"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("null "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\n"),a("span",{attrs:{class:"token keyword"}},[t._v("cp")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("dev"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("null access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\ndd "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("dev"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("null of"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[s("code",[this._v("echo")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-vim extra-class"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[t._v("echo "),a("span",{attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\necho "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\necho "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),a("span",{attrs:{class:"token keyword"}},[t._v("n")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" access"),a("span",{attrs:{class:"token operator"}},[t._v(".")]),t._v("log\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"hdfs-truncate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hdfs-truncate","aria-hidden":"true"}},[this._v("#")]),this._v(" HDFS truncate")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("å…è®¸ç”¨æˆ·ç§»é™¤æ„å¤–å†™å…¥çš„æ•°æ®")]),this._v(" "),s("li",[this._v("å½“å†™äº‹åŠ¡å‘ç”Ÿå¤±è´¥çš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡Œå›æ»šï¼Œå›åˆ°ä¹‹å‰å†™å…¥æˆåŠŸçš„äº‹åŠ¡çŠ¶æ€")]),this._v(" "),s("li",[this._v("æœ‰èƒ½åŠ›ç§»é™¤ä¸€æ¬¡å¤±è´¥çš„å†™æ“ä½œè€Œå†™å…¥çš„ä¸å®Œæ•´çš„æ•°æ®")]),this._v(" "),s("li",[this._v("æå‡HDFSå¯¹äºå…¶å®ƒæ–‡ä»¶ç³»ç»Ÿçš„æ”¯æŒåº¦")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("å®šä½åˆ°æ–°çš„æˆªå–é•¿åº¦æ‰€å¯¹åº”çš„å—ï¼Œç„¶åæŠŠåé¢å¤šä½™çš„å—ä»æ­¤æ–‡ä»¶ä¸­è¿›è¡Œç§»é™¤;")]),this._v(" "),s("li",[this._v("æ‰¾åˆ°æ–°é•¿åº¦æ‰€å¯¹åº”çš„blockå—ä¹‹åï¼Œè®¡ç®—æ­¤å—å†…éƒ¨éœ€è¦ç§»é™¤çš„åç§»é‡ï¼Œç„¶åè¿›è¡Œåˆ é™¤;")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"å‚è€ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ","aria-hidden":"true"}},[this._v("#")]),this._v(" å‚è€ƒ")])}],!1,null,null,null);e.options.__file="truncate.md";s.default=e.exports}}]);