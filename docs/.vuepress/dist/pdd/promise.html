<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å‡½æ•°å¼ç¼–ç¨‹ | ä¹Œäº‘å‹é¡¶æ˜¯å§</title>
    <meta name="description" content="ãŠ—ï¸æŸäººç”Ÿæ—¥å¿«ä¹ğŸ‰">
    
    
    <link rel="preload" href="/assets/css/0.styles.6acf8380.css" as="style"><link rel="preload" href="/assets/js/app.02cca196.js" as="script"><link rel="preload" href="/assets/js/11.c37c162c.js" as="script"><link rel="prefetch" href="/assets/js/10.7ad27450.js"><link rel="prefetch" href="/assets/js/2.285762ea.js"><link rel="prefetch" href="/assets/js/3.ad3b6e7c.js"><link rel="prefetch" href="/assets/js/4.0f9f1586.js"><link rel="prefetch" href="/assets/js/5.5e526c6a.js"><link rel="prefetch" href="/assets/js/6.d8844d1c.js"><link rel="prefetch" href="/assets/js/7.0005dfa0.js"><link rel="prefetch" href="/assets/js/8.62c9f7e5.js"><link rel="prefetch" href="/assets/js/9.e81b42cd.js"><link rel="prefetch" href="/assets/js/12.db5c7c0b.js"><link rel="prefetch" href="/assets/js/13.8b613be9.js"><link rel="prefetch" href="/assets/js/14.8fa9218f.js"><link rel="prefetch" href="/assets/js/15.a162fd7c.js"><link rel="prefetch" href="/assets/js/16.00f5c57b.js"><link rel="prefetch" href="/assets/js/17.90d4a479.js"><link rel="prefetch" href="/assets/js/18.af519db8.js"><link rel="prefetch" href="/assets/js/19.355ef318.js"><link rel="prefetch" href="/assets/js/20.171a4f1a.js"><link rel="prefetch" href="/assets/js/21.77afc3d0.js"><link rel="prefetch" href="/assets/js/22.e3dbb09b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6acf8380.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä¹Œäº‘å‹é¡¶æ˜¯å§</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/react/componentdidupdate.html" class="nav-link">React</a></div><div class="nav-item"><a href="/summary/cs.html" class="nav-link">Summary</a></div><div class="nav-item"><a href="/pdd/" class="nav-link router-link-active">Pdd</a></div> <a href="https://github.com/iofu728/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/react/componentdidupdate.html" class="nav-link">React</a></div><div class="nav-item"><a href="/summary/cs.html" class="nav-link">Summary</a></div><div class="nav-item"><a href="/pdd/" class="nav-link router-link-active">Pdd</a></div> <a href="https://github.com/iofu728/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>æŒ‡å—</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/pdd/" class="sidebar-link">ä»‹ç»</a></li><li><a href="/pdd/structure.html" class="sidebar-link">ç›®å½•çº¦å®š</a></li><li><a href="/pdd/router.html" class="sidebar-link">è·¯ç”±</a></li><li><a href="/pdd/dva.html" class="sidebar-link">Dva</a></li><li><a href="/pdd/promise.html" class="active sidebar-link">å‡½æ•°å¼ç¼–ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pdd/promise.html#lambda-radma" class="sidebar-link">lambda - radma</a></li><li class="sidebar-sub-header"><a href="/pdd/promise.html#curry" class="sidebar-link">curry</a></li><li class="sidebar-sub-header"><a href="/pdd/promise.html#promise" class="sidebar-link">promise</a></li><li class="sidebar-sub-header"><a href="/pdd/promise.html#ç®­å¤´å‡½æ•°" class="sidebar-link">ç®­å¤´å‡½æ•°</a></li><li class="sidebar-sub-header"><a href="/pdd/promise.html#ç»„ä»¶è®¾è®¡" class="sidebar-link">ç»„ä»¶è®¾è®¡</a></li><li class="sidebar-sub-header"><a href="/pdd/promise.html#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a></li></ul></li><li><a href="/pdd/fetch.html" class="sidebar-link">Fetch</a></li><li><a href="/pdd/deploy.html" class="sidebar-link">éƒ¨ç½²</a></li><li><a href="/pdd/style.html" class="sidebar-link">Style</a></li><li><a href="/pdd/mock.html" class="sidebar-link">Mock æ•°æ®</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>å‚è€ƒ</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/pdd/faq.html" class="sidebar-link">FAQ</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" aria-hidden="true" class="header-anchor">#</a> å‡½æ•°å¼ç¼–ç¨‹</h1> <p>å…³äºä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„çœ‹æ³•</p> <p>ä½†æ€»ç»“èµ·æ¥ ä¸å¤–ä¹å‡ ç‚¹</p> <ol><li>ä»¥å‡½æ•°ä¸ºä¸»è¦è½½ä½“çš„ç¼–ç¨‹æ–¹å¼ï¼›</li> <li>ä½¿ç”¨<code>pure</code>ï¼Œ<code>immutable</code>çš„å‡½æ•°ï¼Œä»£æ›¿æ”¹å˜åŸæœ‰çŠ¶æ€çš„å‡½æ•°ï¼Œå‡å°‘ä½œç”¨åŸŸåŠå‰¯ä½œç”¨ï¼›</li> <li>å°†å¤„ç†è¿‡ç¨‹æ‹†è§£æˆå¯å¤ç”¨çš„å‡½æ•°ï¼Œåˆ©ç”¨<code>filter</code> <code>map</code> <code>reduce</code>å‡å°‘ä¸­é—´å˜é‡å’Œæ“ä½œï¼Œè¯­ä¹‰æ›´åŠ æ¸…æ™°ï¼›</li> <li>ä½¿ç”¨é“¾å¼ï¼Œä½¿å¾—å¤„ç†è¿‡ç¨‹æ¸…æ™°ï¼Œå¯è¯»ï¼›</li> <li>ä½¿ç”¨<code>curry</code>åŒ–ï¼ŒæŠŠå‡½æ•°å…¥å‚ç»†åˆ†ï¼Œå»é™¤ä¸éœ€è¦çš„å‚æ•°ï¼›</li></ol> <p>åœ¨æˆ‘çœ‹æ¥ jsçš„å‡½æ•°å¼ç¼–ç¨‹ = <code>lambda</code> + <code>promise</code> + ç®­å¤´å‡½æ•° + <code>curry</code> + ...</p> <h2 id="lambda-radma"><a href="#lambda-radma" aria-hidden="true" class="header-anchor">#</a> lambda - radma</h2> <p>è™½ç„¶ï¼Œç›¸è¾ƒäºjavaçš„<code>lambda</code>ï¼Œjsçš„å‡½æ•°ç¼–ç¨‹æ›´é²œä¸ºäººçŸ¥ã€‚</p> <p>ä½†ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œjsæ¯”javaè·Ÿé€‚åˆè¿›è¡Œå‡½æ•°å¼æ“ä½œã€‚</p> <p>jsåŸç”Ÿæ”¯æŒ<code>.map</code> <code>.filter</code> <code>reduce</code></p> <p>å…¶ä¸­ ç‰¹åˆ«ä¸æ¨èä½¿ç”¨åŸç”Ÿçš„<code>reduce</code> å…¶ä»–ä¸¤ä¸ªå¾ˆå¥½ç”¨</p> <p>ç›¸å¯¹å‘½ä»¤å¼ï¼Œå£°æ˜å¼çš„è¯­æ³•æ›´ç®€æ´</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// å‘½ä»¤å¼</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mapToList</span> <span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>map<span class="token punctuation">[</span>order<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// å£°æ˜å¼</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">mapToList</span> <span class="token operator">=</span> maps <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>maps<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>value <span class="token operator">=&gt;</span> maps<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸¤è€…ä¹‹é—´çš„å·®è·æ˜¯æ˜¾è€Œæ˜“è§çš„</p> <p>å°½é‡ä½¿ç”¨ç®­å¤´å‡½æ•° å’Œ å£°æ˜å¼ å†™æ³•ï¼Œå¯¹äºå‡å°‘ä»£ç é‡ï¼Œæ˜¯å“æœ‰æˆæ•ˆçš„ã€‚</p> <p>åŸåˆ™ä¸Šè®²æ‰€æœ‰forå¾ªç¯ï¼Œif-elseï¼Œswitchéƒ½å¯ä»¥ç”¨radmaå®ç°ã€‚</p> <p>ä¸¾å‡ ä¸ªæ —å­</p> <h3 id="reduce-ğŸ"><a href="#reduce-ğŸ" aria-hidden="true" class="header-anchor">#</a> .reduce ğŸ</h3> <h4 id="è¿”å›å­—ç¬¦ä¸²"><a href="#è¿”å›å­—ç¬¦ä¸²" aria-hidden="true" class="header-anchor">#</a> è¿”å›å­—ç¬¦ä¸²</h4> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// å‘½ä»¤å¼</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">paramsGenerate</span> <span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token string">'?'</span><span class="token punctuation">;</span>

  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>values<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>params <span class="token operator">+=</span> <span class="token string">'&amp;'</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
      params <span class="token operator">+=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>values<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> params<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// å£°æ˜å¼</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">paramsGenerate</span> <span class="token operator">=</span> values <span class="token operator">=&gt;</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>acc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">!</span>acc <span class="token operator">?</span> <span class="token string">'?'</span> <span class="token punctuation">:</span> <span class="token string">'&amp;'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>values<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> values<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å¯ä»¥çœ‹åˆ° å£°æ˜å¼ å†™æ³•ï¼ŒæŠŠä¸Šè¿°ä¸€å¨ä»£ç ï¼Œå˜æˆä¸€è¡Œæ¥å®ç°ã€‚<br>
è¿™é‡Œä½¿ç”¨äº†radmaå‡½æ•°åº“ï¼Œä¹‹æ‰€ä»¥ä¸ä½¿ç”¨åŸç”Ÿçš„<code>reduce</code>ï¼Œæ˜¯å› ä¸ºåŸç”Ÿçš„<code>reduce</code>åŠå…¶éš¾ç”¨.</p> <p>é¦–å…ˆ<code>[].reduce()</code>ä¼šæŠ¥é”™</p> <p>å…¶æ¬¡</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// expect return 1, but return { id: 1 }</span>
<span class="token punctuation">[</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>äºæ˜¯ä¸Šé¢çš„<code>paramsGenerate</code>å‡½æ•°æˆ‘ä»¬éœ€è¦ä¸‰æ¬¡ç‰¹æ®Šå¤„ç†ï¼Œè¿™è¿˜æœ‰ä»€ä¹ˆä¾¿æ·æ€§å¯è¨€ã€‚ã€‚ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">paramsGenerate</span> <span class="token operator">=</span> values <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> values<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> m<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>k <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> `<span class="token operator">?</span>$<span class="token punctuation">{</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>values<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">}</span><span class="token operator">&amp;</span>$<span class="token punctuation">{</span>m<span class="token punctuation">}</span><span class="token operator">=</span>$<span class="token punctuation">{</span>values<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">}</span>`<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="è¿”å›num"><a href="#è¿”å›num" aria-hidden="true" class="header-anchor">#</a> è¿”å›Num</h4> <p>äº‹å®ä¸Šï¼Œreduceæœ€å¼€å§‹å°±æ˜¯ç”¨æ¥è®¡ç®—æ•°ç»„çš„å’Œï¼Œè¿™ç‚¹å¯¹reduceè€Œè¨€ï¼Œå°±æ˜¯å¸¸è§„æ“ä½œã€‚<br>
æ¯”å¦‚è¯´</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> totalAll <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc <span class="token operator">+</span> item<span class="token punctuation">.</span>qps<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> newData<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="è¿”å›object"><a href="#è¿”å›object" aria-hidden="true" class="header-anchor">#</a> è¿”å›Object</h4> <p>è¿™ç‚¹æˆ‘è§‰å¾—å¯ä»¥ç®—æ˜¯ä¸€ä¸ªäº®ç‚¹ï¼Œå¯¹äºæ‡’ç™Œæ™šæœŸæ¥è¯´ï¼Œå¯ä»¥è¯´æ˜¯ç¦éŸ³äº†ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">listToMap</span> <span class="token operator">=</span> list <span class="token operator">=&gt;</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>item<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">:</span> item <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="filter"><a href="#filter" aria-hidden="true" class="header-anchor">#</a> .filter</h3> <p>.filter ä¸»è¦æ›¿ä»£for + ifçš„æ“ä½œï¼Œè¿™ä¸ªä¹Ÿæ˜¯å¸¸è§„æ“ä½œã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> tableId <span class="token operator">=</span> baseDataColumns<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">===</span> item<span class="token punctuation">.</span>colId<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tableId<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="map"><a href="#map" aria-hidden="true" class="header-anchor">#</a> .map</h3> <p>.map è¯´èµ·æ¥ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„.reduceï¼Œç‰¹æ®Šåœ¨å…¶è¿”å›çš„æ˜¯Array</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//åŠå‘½ä»¤å¼</span>
 <span class="token keyword">const</span> tableAll <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>flowMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flowSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>temp<span class="token punctuation">.</span>tableAll<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>flowMap<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//å£°æ˜å¼</span>
<span class="token keyword">const</span> tableAll <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> flowMap<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>flowMap<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span> <span class="token operator">!</span>flowSource<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿçš„.mapï¼Œå®Œå…¨æ˜¯å¼ºè¿«ç—‡ä½¿ç„¶ã€‚åŸç”Ÿçš„mapåœ¨è¿™é‡Œå› ä¸ºå‰é¢è¿›è¡Œäº†.filterå¤„ç†ï¼Œeslintä¼šå¼ºå‰–ä½ åˆ†æˆä¸¤è¡Œã€‚</p> <p>ä¸ºäº†è®©å®ƒå˜æˆä¸€è¡Œï¼Œæˆ‘å°±ç”¨äº†radmaçš„.map</p> <p>å…¶å®radmaè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šæœ‰è¶£çš„è¯­æ³•ï¼Œè¿™é‡Œä»…ä»‹ç»äº†å†°å±±ä¸€è§’ã€‚</p> <h3 id="cond"><a href="#cond" aria-hidden="true" class="header-anchor">#</a> .cond</h3> <p>æ›¿ä»£swicth</p> <div class="language-jsx harmony line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> getStatusText <span class="token operator">=</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">cond</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">'200000'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token string">'æ–°å»º'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">'200100'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token string">'å¾…å‹æµ‹'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
  <span class="token punctuation">[</span><span class="token constant">R</span><span class="token punctuation">.</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">.</span><span class="token function">always</span><span class="token punctuation">(</span><span class="token string">'é”™è¯¯'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="curry"><a href="#curry" aria-hidden="true" class="header-anchor">#</a> curry</h2> <p>ä½•ä¸ºcurryï¼šç»™å®šä¸€ä¸ªå‡½æ•°çš„éƒ¨åˆ†å‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªæ¥å—å…¶ä»–å‚æ•°çš„æ–°å‡½æ•°</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåªæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ã€‚</span>
<span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æŸ¯é‡ŒåŒ–ä¸€ä¸ªå‚æ•°ï¼Œè™½ç„¶ä¼¼ä¹æ²¡ä»€ä¹ˆç”¨</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">curry2</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æŸ¯é‡ŒåŒ–ä¸¤ä¸ªå‚æ•°</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>secondArg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>firstArg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>firstArg<span class="token punctuation">,</span> secondArg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">curry3</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// æŸ¯é‡ŒåŒ–ä¸‰ä¸ªå‚æ•°</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>last<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> middle<span class="token punctuation">,</span> last<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>curryåŒ–ä¸ç®¡æ€ä¹ˆæ ·ï¼Œåœ¨å·¥ç¨‹ä¸Šå¯ä»¥è®©ä½ æ–¹ä¾¿çš„çŸ¥é“æ¯ä¸ªå‚æ•°åœ¨å‡½æ•°é‡Œåˆ°åº•èµ·åˆ°ä½œç”¨äº†æ²¡ã€‚</p> <h2 id="promise"><a href="#promise" aria-hidden="true" class="header-anchor">#</a> promise</h2> <p>promise ç»å¸¸ç”¨äºå¤„ç†å›è°ƒ</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'flow/fetchFlowAll'</span><span class="token punctuation">,</span> groupId <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">goToFlow</span><span class="token punctuation">(</span>groupId<span class="token punctuation">)</span><span class="token punctuation">(</span>flowName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>dvaæ”¯æŒçš„è¿™ä¸ªdispatch ä¹‹å.thençš„è¯­æ³•å®é™…ä¸Šç”¨çš„æ˜¯promiseå®ç°çš„ã€‚<a href="https://github.com/dvajs/dva/blob/master/packages/dva-core/src/createPromiseMiddleware.js" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// dva æºç </span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">NAMESPACE_SEP</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./constants'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">createPromiseMiddleware</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> next <span class="token operator">=&gt;</span> action <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEffect</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          __dva_resolve<span class="token punctuation">:</span> resolve<span class="token punctuation">,</span>
          __dva_reject<span class="token punctuation">:</span> reject<span class="token punctuation">,</span>
          <span class="token operator">...</span>action<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">isEffect</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>type <span class="token operator">||</span> <span class="token keyword">typeof</span> type <span class="token operator">!==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>namespace<span class="token punctuation">]</span> <span class="token operator">=</span> type<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token constant">NAMESPACE_SEP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> model <span class="token operator">=</span> app<span class="token punctuation">.</span>_models<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>namespace <span class="token operator">===</span> namespace<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>model<span class="token punctuation">.</span>effects <span class="token operator">&amp;&amp;</span> model<span class="token punctuation">.</span>effects<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>åœ¨TAISHANé¡¹ç›®ä¸­ï¼Œrequestå°è£…åˆ¤æ–­è¶…æ—¶çš„æ—¶å€™ä¹Ÿç”¨åˆ°äº†promise</p> <div class="language-jsx harmony line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> <span class="token function-variable function">timeout</span> <span class="token operator">=</span> ms <span class="token operator">=&gt;</span> promise <span class="token operator">=&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'timeout'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" aria-hidden="true" class="header-anchor">#</a> ç®­å¤´å‡½æ•°</h2> <p>è¿™ä¸ªå¾ˆç®€å•ï¼Œåªæ˜¯ES6çš„è¯­æ³•ç‰¹æ€§</p> <div class="language-jsx harmony line-numbers-mode"><pre class="language-jsx"><code><span class="token function">function1</span> <span class="token punctuation">(</span>params1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç­‰ä»·äº</span>

<span class="token function-variable function">function1</span> <span class="token operator">=</span> params1 <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å¦‚æœ å‡½æ•°ä¸­åªæœ‰return è¿˜å¯ä»¥ç®€åŒ–ä¸º</span>
<span class="token function-variable function">function1</span> <span class="token operator">=</span> params1 <span class="token operator">=&gt;</span> <span class="token operator">...</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="ç»„ä»¶è®¾è®¡"><a href="#ç»„ä»¶è®¾è®¡" aria-hidden="true" class="header-anchor">#</a> ç»„ä»¶è®¾è®¡</h2> <p>React åº”ç”¨æ˜¯ç”±ä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Component ç»„æˆçš„ï¼Œæˆ‘ä»¬åœ¨æ‹†åˆ† Component çš„è¿‡ç¨‹ä¸­è¦å°½é‡è®©æ¯ä¸ª Component ä¸“æ³¨åšè‡ªå·±çš„äº‹ã€‚</p> <p>ä¸€èˆ¬æ¥è¯´ï¼ŒComponentç»„ä»¶æœ‰ä¸¤ç§è®¾è®¡ï¼š</p> <ol><li>Container Component</li> <li>Presentational Component</li></ol> <h3 id="container-component"><a href="#container-component" aria-hidden="true" class="header-anchor">#</a> Container Component</h3> <p>Container Component ä¸€èˆ¬æŒ‡çš„æ˜¯å…·æœ‰<code>ç›‘å¬æ•°æ®è¡Œä¸º</code>çš„ç»„ä»¶ï¼Œä¸€èˆ¬æ¥è¯´å®ƒä»¬çš„èŒè´£æ˜¯<code>ç»‘å®šç›¸å…³è”çš„ model æ•°æ®</code>ï¼Œä»¥æ•°æ®å®¹å™¨çš„è§’è‰²åŒ…å«å…¶å®ƒå­ç»„ä»¶ï¼Œé€šå¸¸åœ¨é¡¹ç›®ä¸­è¡¨ç°å‡ºæ¥çš„ç±»å‹ä¸ºï¼šLayoutsã€Router Components ä»¥åŠæ™®é€š Containers ç»„ä»¶ã€‚</p> <p>é€šå¸¸çš„ä¹¦å†™å½¢å¼ä¸ºï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropTypes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// dva çš„ connect æ–¹æ³•å¯ä»¥å°†ç»„ä»¶å’Œæ•°æ®å…³è”åœ¨ä¸€èµ·</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dva'</span><span class="token punctuation">;</span>

<span class="token comment">// ç»„ä»¶æœ¬èº«</span>
<span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
MyComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// ç›‘å¬å±æ€§ï¼Œå»ºç«‹ç»„ä»¶å’Œæ•°æ®çš„æ˜ å°„å…³ç³»</span>
<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token operator">...</span>state<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// å…³è” model</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>MyComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="presentational-component"><a href="#presentational-component" aria-hidden="true" class="header-anchor">#</a> Presentational Component</h3> <p>Presentational Component çš„åç§°å·²ç»è¯´æ˜äº†å®ƒçš„èŒè´£ï¼Œå±•ç¤ºå½¢ç»„ä»¶ï¼Œä¸€èˆ¬ä¹Ÿç§°ä½œï¼šDumb Componentï¼Œå®ƒä¸ä¼šå…³è”è®¢é˜… model ä¸Šçš„æ•°æ®ï¼Œè€Œæ‰€éœ€æ•°æ®çš„ä¼ é€’åˆ™æ˜¯é€šè¿‡ props ä¼ é€’åˆ°ç»„ä»¶å†…éƒ¨ã€‚</p> <p>é€šå¸¸çš„ä¹¦å†™å½¢å¼ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> PropTypes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">// ç»„ä»¶æœ¬èº«</span>
<span class="token comment">// æ‰€éœ€è¦çš„æ•°æ®é€šè¿‡ Container Component é€šè¿‡ props ä¼ é€’ä¸‹æ¥</span>
<span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
MyComponent<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å¹¶ä¸ä¼šç›‘å¬æ•°æ®</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> MyComponent<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" aria-hidden="true" class="header-anchor">#</a> å¯¹æ¯”</h3> <p>å¯¹ç»„ä»¶åˆ†ç±»ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p> <ol><li>è®©é¡¹ç›®çš„æ•°æ®å¤„ç†æ›´åŠ é›†ä¸­ï¼›</li> <li>è®©ç»„ä»¶é«˜å†…èšä½è€¦åˆï¼Œæ›´åŠ èšç„¦ï¼›</li></ol> <p>è¯•æƒ³å¦‚æœæ¯ä¸ªç»„ä»¶éƒ½å»è®¢é˜…æ•°æ® modelï¼Œé‚£ä¹ˆä¸€æ–¹é¢ç»„ä»¶æœ¬èº«è·Ÿ model è€¦åˆå¤ªå¤šï¼Œå¦ä¸€æ–¹é¢ä»£ç è¿‡äºé›¶æ•£ï¼Œåˆ°å¤„éƒ½åœ¨æ“ä½œæ•°æ®ï¼Œä¼šå¸¦æ¥åæœŸç»´æŠ¤çš„çƒ¦æ¼ã€‚</p> <p>é™¤äº†å†™æ³•ä¸Šè®¢é˜…æ•°æ®çš„åŒºåˆ«ä»¥å¤–ï¼Œåœ¨è®¾è®¡æ€è·¯ä¸Šä¸¤ä¸ªç»„ä»¶ä¹Ÿæœ‰å¾ˆå¤§ä¸åŒã€‚<br> <code>Presentational Component</code>æ˜¯ç‹¬ç«‹çš„çº¯ç²¹çš„ï¼Œè¿™æ–¹é¢å¾ˆå¥½çš„ä¾‹å­ï¼Œå¯ä»¥å‚è€ƒ <a href="http://ant.design/docs/react/introduce" target="_blank" rel="noopener noreferrer">ant.design UIç»„ä»¶çš„Reactå®ç°<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼Œæ¯ä¸ªç»„ä»¶è·Ÿä¸šåŠ¡æ•°æ®å¹¶æ²¡æœ‰è€¦åˆå…³ç³»ï¼Œåªæ˜¯å®Œæˆè‡ªå·±ç‹¬ç«‹çš„ä»»åŠ¡ï¼Œéœ€è¦çš„æ•°æ®é€šè¿‡ <code>props</code> ä¼ é€’è¿›æ¥ï¼Œéœ€è¦æ“ä½œçš„è¡Œä¸ºé€šè¿‡æ¥å£æš´éœ²å‡ºå»ã€‚<br>
è€Œ <code>Container Component</code> æ›´åƒæ˜¯çŠ¶æ€ç®¡ç†å™¨ï¼Œå®ƒè¡¨ç°ä¸ºä¸€ä¸ªå®¹å™¨ï¼Œè®¢é˜…å­ç»„ä»¶éœ€è¦çš„æ•°æ®ï¼Œç»„ç»‡å­ç»„ä»¶çš„äº¤äº’é€»è¾‘å’Œå±•ç¤ºã€‚</p> <h3 id="å¯¹modalçš„componentä¸ä½¿ç”¨presentationalçš„è§£é‡Š"><a href="#å¯¹modalçš„componentä¸ä½¿ç”¨presentationalçš„è§£é‡Š" aria-hidden="true" class="header-anchor">#</a> å¯¹<code>Modal</code>çš„Componentä¸ä½¿ç”¨<code>Presentational</code>çš„è§£é‡Š</h3> <ol><li>é¡¹ç›®é‡Œé¢å‡ ä¹æ‰€æœ‰çš„æ•°æ®éƒ½å­˜åœ¨Store,å¦‚æœä½¿ç”¨<code>Presentational</code>ä¼šé€ æˆï¼Œä»çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å‚æ•°è¿‡å¤šï¼Œä¸”å¯¹äºå¤ç”¨ç»„ä»¶è€Œè¨€ï¼Œå‚æ•°éœ€è¦ä»æ‰€æœ‰å¼•ç”¨å¤„ä¼ é€’ï¼Œä½¿å¾—ä»£ç æ˜¾å¾—å†—ä½™ï¼Œç¹å†—ï¼Œä¸reduxåˆè¡·ä¸ç¬¦ï¼Œè¿™æ ·é¢å†™æ³•æ›´åƒreactæœ€åŸå§‹çš„æ¶æ„ï¼›</li> <li>å¦‚æœä½¿ç”¨<code>Presentational</code>ï¼Œå¿…é¡»ä¿è¯ä¸èƒ½ä½¿ç”¨connectï¼Œå¯¹äºè°ƒç”¨dispatchå‡½æ•°ï¼Œéƒ½å¾—åœ¨çˆ¶ç»„ä»¶å¤„å£°æ˜ï¼Œä½¿å¾—å›è°ƒå‡½æ•°ä¸æ˜“å®ç°ï¼›</li></ol> <p>æ›´å¤šçš„ç›¸å…³å†…å®¹ï¼Œå¯ä»¥çœ‹çœ‹Reduxä½œè€… Dan Abramov çš„çœ‹æ³•ï¼š</p> <ul><li><a href="https://github.com/reactjs/redux/issues/756#issuecomment-141683834" target="_blank" rel="noopener noreferrer">https://github.com/reactjs/redux/issues/756#issuecomment-141683834<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.231v4pdgr" target="_blank" rel="noopener noreferrer">https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0#.231v4pdgr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" aria-hidden="true" class="header-anchor">#</a> å‚è€ƒ</h2> <ul><li><a href="https://llh911001.gitbooks.io/mostly-adequate-guide-chinese/content/" target="_blank" rel="noopener noreferrer">JS å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://ramdajs.com/" target="_blank" rel="noopener noreferrer">ramda<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ğŸ</li> <li><a href="http://taobaofed.org/blog/2017/03/16/javascript-functional-programing/" target="_blank" rel="noopener noreferrer">æ·˜å®å‰ç«¯FED<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/25/2018, 11:24:32 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pdd/dva.html" class="prev">
          Dva
        </a></span> <span class="next"><a href="/pdd/fetch.html">
          Fetch
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/11.c37c162c.js" defer></script><script src="/assets/js/app.02cca196.js" defer></script>
  </body>
</html>
