<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>immutable.js | ä¹Œäº‘å‹é¡¶æ˜¯å§</title>
    <meta name="description" content="ãŠ—ï¸æŸäººç”Ÿæ—¥å¿«ä¹ğŸ‰">
    <link rel="icon" href="../favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.6acf8380.css" as="style"><link rel="preload" href="/assets/js/app.7c4dfd50.js" as="script"><link rel="preload" href="/assets/js/18.af519db8.js" as="script"><link rel="prefetch" href="/assets/js/10.7ad27450.js"><link rel="prefetch" href="/assets/js/2.285762ea.js"><link rel="prefetch" href="/assets/js/3.ad3b6e7c.js"><link rel="prefetch" href="/assets/js/4.0f9f1586.js"><link rel="prefetch" href="/assets/js/5.5e526c6a.js"><link rel="prefetch" href="/assets/js/6.d8844d1c.js"><link rel="prefetch" href="/assets/js/7.0005dfa0.js"><link rel="prefetch" href="/assets/js/8.62c9f7e5.js"><link rel="prefetch" href="/assets/js/9.e81b42cd.js"><link rel="prefetch" href="/assets/js/11.c37c162c.js"><link rel="prefetch" href="/assets/js/12.db5c7c0b.js"><link rel="prefetch" href="/assets/js/13.8b613be9.js"><link rel="prefetch" href="/assets/js/14.8fa9218f.js"><link rel="prefetch" href="/assets/js/15.a162fd7c.js"><link rel="prefetch" href="/assets/js/16.00f5c57b.js"><link rel="prefetch" href="/assets/js/17.90d4a479.js"><link rel="prefetch" href="/assets/js/19.355ef318.js"><link rel="prefetch" href="/assets/js/20.171a4f1a.js"><link rel="prefetch" href="/assets/js/21.77afc3d0.js"><link rel="prefetch" href="/assets/js/22.e3dbb09b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6acf8380.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä¹Œäº‘å‹é¡¶æ˜¯å§</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/react/componentdidupdate.html" class="nav-link">React</a></div><div class="nav-item"><a href="/summary/cs.html" class="nav-link">Summary</a></div><div class="nav-item"><a href="/pdd/" class="nav-link">Pdd</a></div> <a href="https://github.com/iofu728/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/react/componentdidupdate.html" class="nav-link">React</a></div><div class="nav-item"><a href="/summary/cs.html" class="nav-link">Summary</a></div><div class="nav-item"><a href="/pdd/" class="nav-link">Pdd</a></div> <a href="https://github.com/iofu728/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Component</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/react/componentdidupdate.html" class="sidebar-link">bug of react 16.4 componentDidUpdate</a></li><li><a href="/react/component.html" class="sidebar-link">React component</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Redux</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/react/redux.html" class="sidebar-link">Take about Redux I</a></li><li><a href="/react/reduxs.html" class="sidebar-link">Take about Redux â…¡</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Other</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/react/immutable.html" class="active sidebar-link">immutable.js</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="immutable-js"><a href="#immutable-js" aria-hidden="true" class="header-anchor">#</a> immutable.js</h1> <p>æ¯•è®¾åšåˆ°æƒ³ç ¸ç”µè„‘</p> <p>å¾ˆéš¾å—äº†<br> <img src="http://wyydsb.xin/wp-content/uploads/2018/05/5.12II.gif" alt><br>
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br>
ä¸Šå‘¨å› ä¸ºä¸€ä¸ªå°é—®é¢˜ æ¥è§¦åˆ°<strong>immutable.js</strong>è¿™ä¸ªä¸œè¥¿</p> <p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://facebook.github.io/immutable-js/docs/#/" target="_blank" rel="noopener noreferrer">http://facebook.github.io/immutable-js/docs/#/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p>Immutable data encourages pure functions (data-in, data-out) and lends itself to much simpler application development and enabling techniques from functional programming such as lazy evaluation.</p> <p>While designed to bring these powerful functional concepts to JavaScript, it presents an Object-Oriented API familiar to Javascript engineers and closely mirroring that of Array, Map, and Set. It is easy and efficient to convert to and from plain Javascript types.</p></blockquote> <p>ç®€å• ç¿»è¯‘ä¸€ä¸‹ <code>immutable</code>å€¡å¯¼ç®€å•çš„å‡½æ•°å®ç°ï¼ˆæ•°æ®è¾“å…¥ã€æ•°æ®è¾“å‡ºï¼‰æä¾›äº†ä¸€äº›å°†åŸç”Ÿjsçš„objectå°è£…æˆ <code>mapï¼Œset</code> çš„æ¥å£<br>
å¥½åƒè¿˜æ˜¯ä¸€å¤´é›¾æ°´ ing<br>
é‚£ä¹ˆè®©æˆ‘ä»¬æ…¢æ…¢æ¥è¯´</p> <p>é¦–å…ˆ <code>immutable</code> æ˜¯ç”¨æ¥è§£å†³ <code>react</code>æµ…æ¯”è¾ƒ è¿™ä¸ªé—®é¢˜çš„<br>
å®ƒæ˜¯ä¸€ç§ä¸å¯å˜æ•°æ®ç»“æ„çº¦å®š</p> <p>åœ¨<code>immutable</code>ä¸‹ æ‰€æœ‰æ•°æ®ç»“æ„éƒ½æ˜¯ä¸å¯å˜çš„<br>
å¦‚æœä½ éœ€è¦æ”¹å˜<code>object</code>ä¸‹é¢æŸä¸ªå‚æ•°çš„å€¼çš„æ—¶å€™ åªèƒ½new ä¸€ä¸ª</p> <p>æˆ‘ä»¬çŸ¥é“react æœ‰ä¸€ä¸ª<code>shouldComponentUpdate(nextProps,nextState){}</code>æ–¹æ³•å½“propsæˆ–è€…stateæ›´æ–°çš„æ—¶å€™<br>
ä¼šæ¯”è¾ƒ<code>nextProps</code>å’Œ<code>props</code>,<code>nextState</code>å’Œ<code>state</code>ä¹‹é—´æœ‰æ— åŒºåˆ«ï¼Œå¦‚æœæœ‰åŒºåˆ«å°±è¿”å›trueï¼Œå¦åˆ™å°±è¿”å›false</p> <p>reduxå¯¹æ•°æ®çš„ç®¡ç†ä¹Ÿæ˜¯åŸºäºè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°</p> <p>ä½†è¦æ³¨æ„ åœ¨reactä¸­ æ‰€æœ‰æ¯”è¾ƒéƒ½æ˜¯æµ…æ¯”è¾ƒ<br>
çˆ¬ä¸€ä¸‹ <code>shouldComponentUpdate</code>çš„æºç </p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_compositeType <span class="token operator">===</span> CompositeTypes<span class="token punctuation">.</span>PureClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  shouldUpdate <span class="token operator">=</span> <span class="token operator">!</span><span class="token function">shallowEqual</span><span class="token punctuation">(</span>prevProps<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span> <span class="token function">shallowEqual</span><span class="token punctuation">(</span>inst<span class="token punctuation">.</span>state<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è€Œ<code>shallowEqual</code>çš„æºç åˆ™æ˜¯</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> hasOwn <span class="token operator">=</span> Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty

<span class="token keyword">function</span> <span class="token function">is</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> y <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">shallowEqual</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> objB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">,</span> objB<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> objA <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> objA <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span>
      <span class="token keyword">typeof</span> objB <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> objB <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> keysA <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objA<span class="token punctuation">)</span>
  <span class="token keyword">const</span> keysB <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>objB<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>keysA<span class="token punctuation">.</span>length <span class="token operator">!==</span> keysB<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keysA<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasOwn<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>objB<span class="token punctuation">,</span> keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token operator">!</span><span class="token function">is</span><span class="token punctuation">(</span>objA<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> objB<span class="token punctuation">[</span>keysA<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡º å½“<code>props</code>é‡Œé¢çš„<code>object</code>åªè¦åŒ…å«çš„<code>key</code>ä¹Ÿæ˜¯<code>object</code> å°±ä¼šåˆ¤æ–­é”™è¯¯<br>
æ¢å¥è¯è¯´ï¼Œä½ ä¿®æ”¹<code>object</code>é‡Œé¢çš„<code>object</code>çš„å€¼çš„æ—¶å€™ ä¸ä¼šæ›´æ–°<code>render</code></p> <p>åœ¨å®é™…åº”ç”¨ä¸­ æ¯”å¦‚è¯´å‰ç«¯çš„<code>map</code>è¿™ä¸ªæ•°æ®ç»“æ„</p> <p>å‰ç«¯çš„<code>map</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„<code>object</code> å¯¹åº”çš„å€¼æ˜¯<code>object</code>é‡Œé¢åµŒå¥—<code>object</code></p> <p>è¿™å°±é€ æˆä¸Šé¢çš„é—®é¢˜</p> <p>ç¬”è€…æ˜¯åœ¨ä½¿ç”¨<code>redux</code>ç®¡ç†<code>map</code>æ›´æ–°çš„æ—¶å€™ æ­»æ´»ä¸ä¼šæ¸²æŸ“ æ‰å‘ç°è¿™ä¸ªé—®é¢˜</p> <p>è¿™ä¸ªé—®é¢˜ <code>redux</code> åœ¨<code>issue</code>ä¸­è®¨è®ºè¿‡<a href="https://github.com/reactjs/redux/issues/1499" target="_blank" rel="noopener noreferrer">https://github.com/reactjs/redux/issues/1499<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç»™å‡ºçš„è§£å†³æ–¹æ¡ˆæ˜¯ ä½¿ç”¨<code>immutable.js</code>æ¥ä»£æ›¿åŸç”Ÿçš„<code>map</code></p> <p>è€Œ<code>immutable</code>åˆ™æ˜¯é€šè¿‡ä½¿å¾—å¯¹è±¡ä¸å¯æ”¹å˜ æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„</p> <p>ç›¸å¯¹äº åŸæ¥çš„ æµ…æ¯”è¾ƒ <code>immutable</code>æä¾›çš„æ˜¯æ›´ç²¾ç¡®çš„æ¯”è¾ƒ</p> <p>å¯ä»¥æƒ³è±¡ å¦‚æœä½¿ç”¨<code>immutable.js</code> ç»„ä»¶æ¸²æŸ“æ¬¡æ•°å¯ä»¥å¾—åˆ°æœ‰æ•ˆçš„æ§åˆ¶ å¯ä»¥æ›´ç²¾ç¡®åˆ©ç”¨èµ„æº</p> <p>è€Œ<code>immutable</code>æä¾›<code>immutable-pure-render-decorator</code>æ–¹æ³•è¿›è¡Œæ¯”è¾ƒ</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>React<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'base'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> pureRenderDecorator <span class="token keyword">from</span> <span class="token string">'../../../widgets/libs/immutable-pure-render-decorator'</span><span class="token punctuation">;</span>

@pureRenderDecorator
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">PartA</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// èˆå¼ƒReact.addons.PureRenderMixin</span>
        <span class="token comment">// this.shouldComponentUpdate = React.addons.PureRenderMixin.shouldComponentUpdate.bind(this);</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç»„ä»¶PartAï¼Œrenderæ‰§è¡Œäº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æˆ‘æ˜¯ç»„ä»¶PartA</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>toJSON <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> data<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>é™„ä¸Š è‡ªå·±å†™çš„ æ¯”è¾ƒå‡½æ•°</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">compareArray</span> <span class="token operator">=</span> <span class="token punctuation">(</span>array1<span class="token punctuation">,</span> array2<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>array2 <span class="token operator">||</span> <span class="token operator">!</span>array1<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>array1<span class="token punctuation">.</span>length <span class="token operator">!==</span> array2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array1<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">&amp;&amp;</span> array2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> array2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">compareObject</span><span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> array2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>array1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> array2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">compareObject</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> x <span class="token operator">===</span> undefined <span class="token operator">||</span> y <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> y <span class="token operator">===</span> undefined<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">===</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>constructor <span class="token operator">!==</span> y<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">===</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> x <span class="token operator">===</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y <span class="token operator">||</span> x<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> y<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>length <span class="token operator">!==</span> y<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>x <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>y <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> p <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> p<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">compareObject</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><code>updated 6/6/2018</code></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/20/2018, 12:12:57 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/react/reduxs.html" class="prev">
          Take about Redux â…¡
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/18.af519db8.js" defer></script><script src="/assets/js/app.7c4dfd50.js" defer></script>
  </body>
</html>
